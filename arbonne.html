<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Fit with Eveline – Wellness Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
--primary:#0a3d62;
--accent:#20bf6b;
--bg:#f5f7f8;
--muted:#6c7a89;
--shadow:0 10px 25px rgba(0,0,0,.08);
}

*{box-sizing:border-box}
body{
margin:0;
font-family:system-ui;
background:var(--bg);
}

main{max-width:1000px;margin:auto;padding:40px}

h1,h2{font-family:"Playfair Display";color:var(--primary)}

.hero{
background:#fff;
padding:70px;
border-radius:32px;
box-shadow:var(--shadow);
opacity:0;
transform:translateY(40px);
transition:1s ease;
}

.hero.visible{opacity:1;transform:none}

.calc-grid{
margin-top:40px;
display:grid;
grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
gap:20px;
}

.tile{
background:#fff;
padding:18px;
border-radius:18px;
box-shadow:var(--shadow);
}

.tile label{
font-size:.75rem;
color:var(--muted);
}

.tile input,.tile select{
width:100%;
border:none;
font-size:1rem;
outline:none;
}

button{
margin-top:30px;
background:var(--accent);
border:none;
color:white;
padding:14px 34px;
border-radius:999px;
font-weight:600;
cursor:pointer;
}

.results{
display:none;
margin-top:50px;
gap:20px;
grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
}

.card{
background:#fff;
padding:24px;
border-radius:22px;
box-shadow:var(--shadow);
text-align:center;
}

.email-box{
margin-top:30px;
background:#fff;
padding:24px;
border-radius:22px;
box-shadow:var(--shadow);
}

.admin{
margin-top:80px;
background:#fff;
padding:30px;
border-radius:22px;
box-shadow:var(--shadow);
display:none;
}

.admin table{
width:100%;
border-collapse:collapse;
font-size:.85rem;
}

.admin td,.admin th{
border-bottom:1px solid #eee;
padding:8px;
}

.fade{
opacity:0;
transform:translateY(30px);
transition:.8s ease;
}

.fade.visible{
opacity:1;
transform:none;
}
</style>
</head>

<body>

<main>

<section class="hero fade">
<h1>Personal Wellness Calculator</h1>
<p>Oblicz kalorie, otrzymaj indywidualny plan i zapisz wynik jako PDF.</p>

<div class="calc-grid">

<div class="tile">
<label>Płeć</label>
<select id="sex">
<option value="female">Kobieta</option>
<option value="male">Mężczyzna</option>
</select>
</div>

<div class="tile">
<label>Waga (kg)</label>
<input id="weight" type="number">
</div>

<div class="tile">
<label>Wzrost (cm)</label>
<input id="height" type="number">
</div>

<div class="tile">
<label>Wiek</label>
<input id="age" type="number">
</div>

<div class="tile">
<label>Aktywność</label>
<select id="activity">
<option value="1.2">Brak</option>
<option value="1.375">Lekka</option>
<option value="1.55">Średnia</option>
<option value="1.725">Duża</option>
<option value="1.9">Bardzo duża</option>
</select>
</div>

</div>

<button onclick="calculate()">Oblicz</button>

<div id="results" class="results">

<div class="card">
Utrzymanie
<strong id="maintain"></strong>
</div>

<div class="card">
Redukcja
<strong id="cut"></strong>
</div>

<div class="card">
Masa
<strong id="bulk"></strong>
</div>

</div>

<div id="plan" class="email-box" style="display:none">
<h3>Twój plan</h3>
<p id="planText"></p>

<input id="email" placeholder="Twój email">
<br><br>
<button onclick="saveLead()">Zapisz + PDF</button>
</div>

</section>

<section class="admin" id="admin">
<h2>Panel Admin (local)</h2>
<table id="leadsTable"></table>
</section>

</main>

<script>
const fades=document.querySelectorAll('.fade');
setTimeout(()=>fades.forEach(f=>f.classList.add("visible")),300);

function calculate(){

const w=+weight.value,h=+height.value,a=+age.value;
if(!w||!h||!a)return alert("Uzupełnij dane");

let bmr=sex.value==="female"
?10*w+6.25*h-5*a-161
:10*w+6.25*h-5*a+5;

let tdee=Math.round(bmr*activity.value);

maintain.innerText=tdee+" kcal";
cut.innerText=tdee-400+" kcal";
bulk.innerText=tdee+300+" kcal";

results.style.display="grid";

planText.innerText=
`Rekomendujemy ${tdee-400} kcal na redukcji.
Codziennie: 8–10k kroków, 3 treningi tygodniowo,
30g białka w każdym posiłku.
Suplementacja + regeneracja wg konsultacji.`;

plan.style.display="block";
}

function saveLead(){

if(!email.value)return alert("Podaj email");

let leads=JSON.parse(localStorage.getItem("leads")||"[]");

leads.push({
email:email.value,
maintain:maintain.innerText,
cut:cut.innerText,
bulk:bulk.innerText,
date:new Date().toLocaleString()
});

localStorage.setItem("leads",JSON.stringify(leads));

generatePDF();
loadAdmin();
alert("Zapisano + wygenerowano PDF");
}

function generatePDF(){

const { jsPDF } = window.jspdf;
const doc=new jsPDF();

doc.text("Fit With Eveline – Personal Plan",20,20);
doc.text("Utrzymanie: "+maintain.innerText,20,40);
doc.text("Redukcja: "+cut.innerText,20,55);
doc.text("Masa: "+bulk.innerText,20,70);
doc.text(planText.innerText,20,100);

doc.save("wellness-plan.pdf");
}

function loadAdmin(){

admin.style.display="block";
let leads=JSON.parse(localStorage.getItem("leads")||"[]");

let html="<tr><th>Email</th><th>Data</th><th>Utrzymanie</th></tr>";

leads.forEach(l=>{
html+=`<tr><td>${l.email}</td><td>${l.date}</td><td>${l.maintain}</td></tr>`;
});

leadsTable.innerHTML=html;
}

loadAdmin();
</script>

</body>
</html>
